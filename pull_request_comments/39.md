## üö® Critical Feedback - Monthly Reports Implementation Needs Revision

### Problem 1: Auto-Generation Not Working Properly
The current implementation shows empty forms that require manual data entry. The **core purpose** of Monthly Reports is to **automatically aggregate data from existing Teacher Comment Sheets (lesson_reports)**.

**Expected Workflow:**
1. Teacher fills out comment sheets throughout the month (existing `lesson_reports` table)
2. User selects **class** + **date range** 
3. System **automatically pulls all lesson reports** for that class/period
4. Data is **pre-populated** into the monthly report table
5. User can optionally edit, then generate PDF

### Problem 2: Field Mapping Needed
Map lesson_reports fields to monthly report template:

| Monthly Report Field | Source from lesson_reports |
|---------------------|---------------------------|
| Date (Êó•‰ªò) | `date` |
| Target (ÁõÆÊ®ô) | `target_topic` |
| Vocabulary (ÂçòË™û) | `vocabulary` |
| Phrase (Êñá) | Could extract from `vocabulary` or add new field |
| Others („Åù„ÅÆ‰ªñ) | `comments` or `mistakes` |

### Problem 3: Flexible Date Range Support
Add support for:
- Monthly (default): Select month/year
- Weekly: Select week start date
- Custom range: Select start and end dates

### Required Changes:

1. **Fix Auto-Generate Logic** - When user clicks "Auto-Generate from Lesson Reports":
   - Query `lesson_reports` WHERE `class_id = X` AND `date BETWEEN start AND end`
   - Sort by date
   - Pre-populate all week rows with the data
   - Show success message with number of lessons found

2. **UI Flow Change**:
   - Move date range selector to TOP
   - Add "Generate Report" button that fetches and displays data
   - Show populated data in preview format (like the PDF template)
   - Allow inline editing
   - Keep manual entry as backup option

3. **Monthly Theme (‰ªäÊúà„ÅÆ„ÉÜ„Éº„Éû)** - Could auto-suggest based on most common `target_topic` across the month

### Reference Image
The user uploaded a Monthly Report template showing the expected output format with weekly columns containing: Date, Target, Vocabulary, Phrase, Others rows - all pre-populated from teacher comment sheets.